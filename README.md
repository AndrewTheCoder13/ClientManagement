# Обзор

Этот проект — приложение Spring Boot, предназначенное для управления клиентами и их контактами. Оно предоставляет RESTful API для создания, получения и управления данными клиентов и контактов.

## Эндпоинты

### ClientController

 `ClientController`  обрабатывает операции, связанные с клиентами. Он привязан к базовому URL  `api/clients` .

- **Создать клиента**

  - **Эндпоинт**:  `POST /api/clients` 
  - **Тело запроса**:  `CreateClientDTO` 
    -  `name`  (String): Имя клиента.
  - **Ответ**:  `ClientDTO` 
    -  `name`  (String): Имя клиента.
    -  `contacts`  (List<ContactDTO>): Список контактов, связанных с клиентом.
  - **Описание**: Создает нового клиента и возвращает данные созданного клиента.

- **Получить всех клиентов**

  - **Эндпоинт**:  `GET /api/clients` 
  - **Ответ**: Список  `ClientDTO` 
  - **Описание**: Получает всех клиентов.

- **Получить клиента по ID**

  - **Эндпоинт**:  `GET /api/clients/{clientId}` 
  - **Переменная пути**:  `clientId`  (Long): ID клиента.
  - **Ответ**:  `ClientDTO` 
  - **Описание**: Получает клиента по его ID.

### ContactController

 `ContactController`  управляет операциями, связанными с контактами для конкретного клиента. Он привязан к базовому URL  `api/clients/{clientId}/contacts` .

- **Добавить контакт**

  - **Эндпоинт**:  `POST /api/clients/{clientId}/contacts` 
  - **Переменная пути**:  `clientId`  (Long): ID клиента.
  - **Тело запроса**:  `CreateContactDTO` 
    -  `type`  (ContactType): Тип контакта (например, PHONE, EMAIL).
    -  `value`  (String): Значение контакта.
  - **Ответ**:  `ContactDTO` 
    -  `type`  (ContactType): Тип контакта.
    -  `value`  (String): Значение контакта.
  - **Описание**: Добавляет новый контакт для клиента.

- **Получить контакты**

  - **Эндпоинт**:  `GET /api/clients/{clientId}/contacts` 
  - **Переменная пути**:  `clientId`  (Long): ID клиента.
  - **Ответ**: Список  `ContactDTO` 
  - **Описание**: Получает все контакты для конкретного клиента.

- **Получить контакты по типу**

  - **Эндпоинт**:  `GET /api/clients/{clientId}/contacts/byType` 
  - **Переменная пути**:  `clientId`  (Long): ID клиента.
  - **Параметр запроса**:  `type`  (ContactType): Тип контакта для фильтрации.
  - **Ответ**: Список  `ContactDTO` 
  - **Описание**: Получает контакты для конкретного клиента, отфильтрованные по типу контакта.

## Объекты передачи данных (DTO)

- **CreateClientDTO**: Используется для создания нового клиента.
  -  `name`  (String): Имя клиента.

- **ClientDTO**: Представляет данные клиента.
  -  `name`  (String): Имя клиента.
  -  `contacts`  (List<ContactDTO>): Список контактов, связанных с клиентом.

- **CreateContactDTO**: Используется для создания нового контакта.
  -  `type`  (ContactType): Тип контакта.
  -  `value`  (String): Значение контакта.

- **ContactDTO**: Представляет данные контакта.
  -  `type`  (ContactType): Тип контакта.
  -  `value`  (String): Значение контакта.

## Особенности

- Приложение использует базу данных PostgreSQL
- Схема базы данных управляется с помощью миграций Flyway, с начальными таблицами, созданными в  `V1__create_tables.sql` .
- Приложение настроено для работы на Java 21
